---
import Layout from '../layouts/BlogPost.astro';

const pageTitle = "Join the Order";
const pageDescription = "Become an Associate of the Order of the 19th and join a brotherhood united by tradition";
---

<Layout title={pageTitle} description={pageDescription} pubDate={new Date()} showHeader={false}>
  <style is:global>
    /* Hide the ShareButtons and PostMeta */
    .prose > div:first-child,
    .prose > div:nth-child(2) {
      display: none !important;
    }
    /* Hide the footer on this page */
    footer#contact {
      display: none !important;
    }
  </style>

  <!-- Rest of your page content stays the same -->

  <!-- Hero Section -->
  <section class="w-full py-16 md:py-24">
    <div class="mx-auto max-w-4xl px-4">
      <h1 class="mb-6 text-4xl md:text-5xl lg:text-6xl font-bold text-center text-[#0ea472]">
        Join the Order
      </h1>
      <p class="text-xl md:text-2xl text-center text-neutral-700 dark:text-neutral-300 mb-8 max-w-3xl mx-auto leading-relaxed">
        Become an Associate of the Order of the 19th and help preserve the tradition of the 19th hole.
      </p>
    </div>
  </section>

  <!-- Join Form Section -->
  <section class="w-full py-8">
    <div class="mx-auto max-w-xl px-4">
      <!-- Form -->
      <form id="joinForm" class="space-y-6 p-8 bg-neutral-50 dark:bg-neutral-900/50 rounded-xl">
        <!-- Family Name -->
        <div>
          <label for="familyName" class="block text-sm font-medium mb-2 text-neutral-800 dark:text-neutral-200">
            Family Name <span class="text-[#0ea472]">*</span>
          </label>
          <input 
            type="text" 
            id="familyName" 
            name="familyName" 
            required
            class="w-full px-4 py-3 rounded-lg border border-neutral-300 dark:border-neutral-600 bg-white dark:bg-neutral-800 text-neutral-800 dark:text-neutral-200 focus:ring-2 focus:ring-[#0ea472] focus:border-transparent"
            placeholder="Your family name"
          />
        </div>

        <!-- Email -->
        <div>
          <label for="email" class="block text-sm font-medium mb-2 text-neutral-800 dark:text-neutral-200">
            Email Address <span class="text-[#0ea472]">*</span>
          </label>
          <input 
            type="email" 
            id="email" 
            name="email" 
            required
            class="w-full px-4 py-3 rounded-lg border border-neutral-300 dark:border-neutral-600 bg-white dark:bg-neutral-800 text-neutral-800 dark:text-neutral-200 focus:ring-2 focus:ring-[#0ea472] focus:border-transparent"
            placeholder="your.email@example.com"
          />
        </div>

        <!-- Certificate Consent (Required) -->
        <div class="space-y-3">
          <div class="flex items-start">
            <input 
              type="checkbox" 
              id="certificateConsent" 
              name="certificateConsent" 
              checked
              required
              class="mt-1 h-4 w-4 text-[#0ea472] border-neutral-300 dark:border-neutral-600 rounded focus:ring-[#0ea472]"
            />
            <label for="certificateConsent" class="ml-3 text-sm text-neutral-700 dark:text-neutral-300">
              Send me my Associate's Charter and certificate
            </label>
          </div>
        </div>

        <!-- Newsletter Consent (Optional) -->
        <div class="space-y-3">
          <div class="flex items-start">
            <input 
              type="checkbox" 
              id="newsletterConsent" 
              name="newsletterConsent"
              class="mt-1 h-4 w-4 text-[#0ea472] border-neutral-300 dark:border-neutral-600 rounded focus:ring-[#0ea472]"
            />
            <label for="newsletterConsent" class="ml-3 text-sm text-neutral-700 dark:text-neutral-300">
              Send me the monthly newsletter
            </label>
          </div>
        </div>

        <!-- Submit Button -->
        <button 
          type="submit"
          class="w-full px-8 py-4 bg-[#0ea472] !text-white font-semibold rounded-lg hover:bg-[#0c8a5f] active:bg-[#0a7350] transition-colors duration-200 shadow-lg hover:shadow-xl"
        >
          Request Admission
        </button>

        <!-- Success/Error Messages -->
        <div id="formMessage" class="hidden mt-4 p-4 rounded-lg"></div>
      </form>
    </div>
  </section>

  <!-- What Happens Next Section -->
  <section class="w-full py-12">
    <div class="mx-auto max-w-2xl px-4">
      <h3 class="text-2xl font-bold mb-4 text-center text-neutral-800 dark:text-neutral-100">
        What happens next?
      </h3>
      <p class="text-center text-neutral-700 dark:text-neutral-300 mb-6">
        Upon joining, you'll receive:
      </p>
      <ul class="space-y-3 text-neutral-700 dark:text-neutral-300 max-w-md mx-auto">
        <li class="flex items-start gap-3">
          <span class="text-[#0ea472] mt-1">•</span>
          <span>Your Associate's Charter (digital document)</span>
        </li>
        <li class="flex items-start gap-3">
          <span class="text-[#0ea472] mt-1">•</span>
          <span>Official certificate of association</span>
        </li>
        <li class="flex items-start gap-3">
          <span class="text-[#0ea472] mt-1">•</span>
          <span>Information about contributing to the Order</span>
        </li>
      </ul>
      
      <p class="text-sm text-center text-neutral-500 dark:text-neutral-400 mt-8 italic">
        Your information remains private. We never share or sell your details.
      </p>
    </div>
  </section>

  <!-- Temporary Form Handler Script -->
  <script>
    document.getElementById('joinForm')?.addEventListener('submit', async (e) => {
      e.preventDefault();
      
      const formData = new FormData(e.target as HTMLFormElement);
      const messageDiv = document.getElementById('formMessage');
      
      if (!messageDiv) return;
      
      // Show processing message
      messageDiv.className = 'mt-4 p-4 rounded-lg bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200';
      messageDiv.textContent = 'Processing your membership...';
      messageDiv.classList.remove('hidden');
      
      // TODO: Replace with actual Google Sheets integration
      // For now, just simulate success
      setTimeout(() => {
        messageDiv.className = 'mt-4 p-4 rounded-lg bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200';
        messageDiv.textContent = 'Welcome to the Order! Check your email for your certificate and Member ID.';
        (e.target as HTMLFormElement).reset();
      }, 1500);
      
      // Log form data for now (will be replaced with Google Sheets submission)
      console.log('Form Data:', {
        familyName: formData.get('familyName'),
        email: formData.get('email'),
        certificateConsent: formData.get('certificateConsent') === 'on',
        newsletterConsent: formData.get('newsletterConsent') === 'on',
        timestamp: new Date().toISOString(),
        ipAddress: 'Will be captured server-side'
      });
    });
  </script>
</Layout>
